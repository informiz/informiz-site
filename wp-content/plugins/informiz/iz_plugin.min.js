!function(a){"use strict";a.fn.bPopup=function(b,c){function d(){p(u.onOpen),P=(J.data("bPopup")||0)+1,v=M+P+"__",x="auto"!==u.position[1],y="auto"!==u.position[0],z="fixed"===u.positionStyle,C=G.outerHeight(!0),D=G.outerWidth(!0),u.loadUrl?e():f()}function e(){switch(u.contentContainer=a(u.contentContainer||G),u.content){case"iframe":var b=a('<iframe class="b-iframe" '+u.iframeAttr+"></iframe>");b.appendTo(u.contentContainer),C=G.outerHeight(!0),D=G.outerWidth(!0),f(),b.attr("src",u.loadUrl),p(u.loadCallback);break;case"image":f(),a("<img />").load(function(){p(u.loadCallback),i(a(this))}).attr("src",u.loadUrl).hide().appendTo(u.contentContainer);break;default:f(),a('<div class="b-ajax-wrapper"></div>').load(u.loadUrl,u.loadData,function(b,c,d){p(u.loadCallback,c),i(a(this))}).hide().appendTo(u.contentContainer)}}function f(){u.modal&&a('<div class="b-modal '+v+'"></div>').css({backgroundColor:u.modalColor,position:"fixed",top:0,right:0,bottom:0,left:0,opacity:0,zIndex:u.zIndex+P}).appendTo(u.appendTo).fadeTo(u.speed,u.opacity),q(),G.data("bPopup",u).data("id",v).css({left:"slideIn"==u.transition||"slideBack"==u.transition?"slideBack"==u.transition?H.scrollLeft()+L:-1*(B+D):n(!(!u.follow[0]&&y||z)),position:u.positionStyle||"absolute",top:"slideDown"==u.transition||"slideUp"==u.transition?"slideUp"==u.transition?H.scrollTop()+K:A+-1*C:o(!(!u.follow[1]&&x||z)),"z-index":u.zIndex+P+1}).each(function(){u.appending&&a(this).appendTo(u.appendTo)}),l(!0)}function g(){return u.modal&&a(".b-modal."+G.data("id")).fadeTo(u.speed,0,function(){a(this).remove()}),k(),clearTimeout(F),l(),!1}function h(b){K=s(),L=t(),w=r(),(w.x||w.y)&&(clearTimeout(E),E=setTimeout(function(){q(),b=b||u.followSpeed;var c={};w.x&&(c.left=u.follow[0]?n(!0):"auto"),w.y&&(c.top=u.follow[1]?o(!0):"auto"),G.dequeue().each(function(){z?a(this).css({left:B,top:A}):a(this).animate(c,b,u.followEasing)})},50))}function i(a){var b=a.width(),c=a.height(),d={};u.contentContainer.css({height:c,width:b}),c>=G.height()&&(d.height=G.height()),b>=G.width()&&(d.width=G.width()),C=G.outerHeight(!0),D=G.outerWidth(!0),q(),u.contentContainer.css({height:"auto",width:"auto"}),d.left=n(!(!u.follow[0]&&y||z)),d.top=o(!(!u.follow[1]&&x||z)),G.animate(d,250,function(){a.show(),w=r()})}function j(){J.data("bPopup",P),G.delegate(".bClose, ."+u.closeClass,"click."+v,g),u.modalClose&&a(".b-modal."+v).css("cursor","pointer").bind("click",g),N||!u.follow[0]&&!u.follow[1]||J.bind("scroll."+v,function(){if(w.x||w.y){var a={};w.x&&(a.left=u.follow[0]?n(!z):"auto"),w.y&&(a.top=u.follow[1]?o(!z):"auto"),G.dequeue().animate(a,u.followSpeed,u.followEasing)}}).bind("resize."+v,function(){h()}),u.escClose&&H.bind("keydown."+v,function(a){27==a.which&&g()})}function k(){u.scrollBar||a("html").css("overflow","auto"),a(".b-modal."+v).unbind("click"),H.unbind("keydown."+v),J.unbind("."+v).data("bPopup",J.data("bPopup")-1>0?J.data("bPopup")-1:null),G.undelegate(".bClose, ."+u.closeClass,"click."+v,g).data("bPopup",null)}function l(a){function b(b){G.css({display:"block",opacity:1}).animate(b,u.speed,u.easing,function(){m(a)})}switch(a?u.transition:u.transitionClose||u.transition){case"slideIn":b({left:a?n(!(!u.follow[0]&&y||z)):H.scrollLeft()-(D||G.outerWidth(!0))-O});break;case"slideBack":b({left:a?n(!(!u.follow[0]&&y||z)):H.scrollLeft()+L+O});break;case"slideDown":b({top:a?o(!(!u.follow[1]&&x||z)):H.scrollTop()-(C||G.outerHeight(!0))-O});break;case"slideUp":b({top:a?o(!(!u.follow[1]&&x||z)):H.scrollTop()+K+O});break;default:G.stop().fadeTo(u.speed,a?1:0,function(){m(a)})}}function m(a){a?(j(),p(c),u.autoClose&&(F=setTimeout(g,u.autoClose))):(G.hide(),p(u.onClose),u.loadUrl&&(u.contentContainer.empty(),G.css({height:"auto",width:"auto"})))}function n(a){return a?B+H.scrollLeft():B}function o(a){return a?A+H.scrollTop():A}function p(b,c){a.isFunction(b)&&b.call(G,c)}function q(){A=x?u.position[1]:Math.max(0,(K-G.outerHeight(!0))/2-u.amsl),B=y?u.position[0]:(L-G.outerWidth(!0))/2,w=r()}function r(){return{x:L>G.outerWidth(!0),y:K>G.outerHeight(!0)}}function s(){return J.height()}function t(){return J.width()}a.isFunction(b)&&(c=b,b=null);var u=a.extend({},a.fn.bPopup.defaults,b);u.scrollBar||a("html").css("overflow","hidden");var v,w,x,y,z,A,B,C,D,E,F,G=this,H=a(document),I=window,J=a(I),K=s(),L=t(),M="__b-popup",N=/OS 6(_\d)+/i.test(navigator.userAgent),O=200,P=0;return G.close=function(){g()},G.reposition=function(a){h(a)},G.each(function(){a(this).data("bPopup")||d()})},a.fn.bPopup.defaults={amsl:50,appending:!0,appendTo:"body",autoClose:!1,closeClass:"b-close",content:"ajax",contentContainer:!1,easing:"swing",escClose:!0,follow:[!0,!0],followEasing:"swing",followSpeed:500,iframeAttr:'scrolling="no" frameborder="0"',loadCallback:!1,loadData:!1,loadUrl:!1,modal:!0,modalClose:!0,modalColor:"#000",onClose:!1,onOpen:!1,opacity:.7,position:["auto","auto"],positionStyle:"absolute",scrollBar:!0,speed:250,transition:"fadeIn",transitionClose:!1,zIndex:9997}}(jQuery),function(a){"$:nomunge";function b(b){function d(){b?g.removeData(b):m&&delete c[m]}function f(){i.id=setTimeout(function(){i.fn()},n)}var g,h=this,i={},j=b?a.fn:a,k=arguments,l=4,m=k[1],n=k[2],o=k[3];if("string"!=typeof m&&(l--,m=b=0,n=k[1],o=k[2]),b?(g=h.eq(0),g.data(b,i=g.data(b)||{})):m&&(i=c[m]||(c[m]={})),i.id&&clearTimeout(i.id),delete i.id,o)i.fn=function(a){"string"==typeof o&&(o=j[o]),o.apply(h,e.call(k,l))!==!0||a?d():f()},f();else{if(i.fn)return void 0===n?d():i.fn(n===!1),!0;d()}}var c={},d="doTimeout",e=Array.prototype.slice;a[d]=function(){return b.apply(window,[0].concat(e.call(arguments)))},a.fn[d]=function(){var a=e.call(arguments),c=b.apply(this,[d+a[0]].concat(a));return"number"==typeof a[0]||"number"==typeof a[1]?this:c}}(jQuery),function(a){var b={updateSrcAndCustomize:function(b,c){var d="http://informiz.org/json/"+b+"/";a.ajax({type:"GET",url:d,cache:!1,dataType:"jsonp",success:c})},makeUpdateAndCustomizeFunc:function(a,c,d,e){return function(f){c.iz_error||(c[d]=f.iz_type,c[e]=f.iz_src,b.customizeTip(a,c))}},customizeTip:function(b,c){"informiz"==c.infMedia?($updateAndCustomizeFunc=this.makeUpdateAndCustomizeFunc(b,c,"infMedia","infSrc"),this.updateSrcAndCustomize(c.infSrc,$updateAndCustomizeFunc)):"informiz"==c.landMedia?($updateAndCustomizeFunc=this.makeUpdateAndCustomizeFunc(b,c,"landMedia","landSrc"),this.updateSrcAndCustomize(c.landSrc,$updateAndCustomizeFunc)):($tooltip=a(a("#iz-tip-wrapper").prop("outerHTML")),$tooltip.find(".iz_title").text(b.text()),inf=this.getEmbedUrl({media:c.infMedia,src:c.infSrc}),inf&&$tooltip.find(".iz_informi").attr("title",inf),land=this.getEmbedUrl({media:c.landMedia,src:c.landSrc}),land&&$tooltip.find(".iz_landscape").attr("title",land),(inf||land)&&this.configureTipso(b,$tooltip.prop("innerHTML"),"auto"))},attachInformiz:function(a){this.customizeTip(a,{infMedia:a.attr("data-inf-media"),infSrc:a.attr("data-inf-src"),landMedia:a.attr("data-land-media"),landSrc:a.attr("data-land-src")})},getEmbedUrl:function(a){var b="";switch(a.media){case"prezi":var c=a.src.match(/^([a-zA-Z0-9-_]{3,30})/);null!==c&&void 0!==c[1]&&(b="https://prezi.com/embed/"+c[1]+"/?autoplay=1");break;case"gapminder":var c=a.src.match(/^([#]?[$]?([a-zA-Z]{1,15}=[a-zA-Z0-9$=-_.]{1,30};?)+)/);null!==c&&void 0!==c[1]&&(b="http://www.gapminder.org/world/"+c[1]);break;case"infographics":var c=a.src.match(/^([0-9]+\/([A-Za-z0-9_-]+).([jJ][pP][eE]?[gG]|[pP][nN][gG]|[gG][iI][fF]))$/);null!==c&&void 0!==c[1]&&(b="http://informiz.org/wp-content/uploads/infographics/"+c[1])}return b},attachClickEvent:function(b,c){c.on("click",function(c){c.preventDefault();var d=a(".iz_bpop_container"),e=a(this),f=e.attr("title"),g=f.split(".").pop().match(/^([jJ][pP][eE]?[gG]|[pP][nN][gG]|[gG][iI][fF])$/);null!==g&&void 0!==g[1]?d.bPopup({content:"image",contentContainer:".iz_bpop_content",loadUrl:f,closeClass:"iz_bpop_close"}):d.bPopup({content:"iframe",contentContainer:".iz_bpop_content",loadUrl:f,closeClass:"iz_bpop_close",iframeAttr:'width="800" height="480" scrolling="auto" frameborder="0"'}),b.hide()})},attachPopup:function(a,b){$bttn=a.find(b),$bttn.attr("title")?(this.attachClickEvent(a,$bttn),$bttn.prop("disabled",!1)):$bttn.prop("disabled",!0)},configureTipso:function(a,c,d){void 0===d&&(d=250),a.iztipso({content:c,width:d,background:"rgba(253,232,217,0.9)",color:"#000",delay:500,toggleAnimation:!0,onShow:function(a){$tooltip=a.get(0).tooltip(),b.attachPopup($tooltip,".iz_informi"),b.attachPopup($tooltip,".iz_landscape")}})}};a(document).ready(function(){a(".iz_dialog").length&&a(".iz-informitip").each(function(c){b.attachInformiz(a(this))})})}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){function b(b,c){this.element=a(b),this.doc=a(document),this.win=a(window),this.settings=a.extend({},p,c),this._defaults=p,this._name=o,this._title=this.element.attr("title"),this.mode="hide",this.ieFade=!s,this.uid=q++,this.init()}function c(a){the_width=a.settings.width,a.settings.maxWidth&&(the_width=a.settings.maxWidth),iztipso_bubble=a.tooltip(),iztipso_bubble.css({background:"#BDB76B",background:a.settings.background,color:a.settings.color,width:the_width,display:"none"}),n(a)}function d(b,c){b.settings.tooltipHover&&c.hover(function(){a.doTimeout(String(b.uid)),a(this).is(":animated")&&f(b)},function(){h(b)})}function e(a){return a.ieFade||""===a.settings.animationIn||""===a.settings.animationOut}function f(b){k(b),iztipso_bubble=b.tooltip(),objProto=a(b);var c=!b.settings.toggleAnimation;e(b)?iztipso_bubble.appendTo("body").stop(!0,c).fadeIn(b.settings.speed,g(b,iztipso_bubble)):iztipso_bubble.remove().appendTo("body").stop(!0,c).removeClass("animated "+b.settings.animationOut).addClass("noAnimation").removeClass("noAnimation").addClass("animated "+b.settings.animationIn).fadeIn(b.settings.speed,function(){objProto.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){objProto.removeClass("animated "+b.settings.animationIn)}),g(b,iztipso_bubble)})}function g(b,c){b.mode="show",d(b,c),a.isFunction(b.settings.onShow)&&b.settings.onShow(a(b))}function h(b){return"hide"==b.mode?void a.doTimeout(String(b.uid)):void a.doTimeout(String(b.uid),b.settings.delay,function(){i(b)})}function i(b){iztipso_bubble=b.tooltip();var c=!b.settings.toggleAnimation;e(b)?iztipso_bubble.stop(!0,c).fadeOut(b.settings.speed,j(b)):iztipso_bubble.stop(!0,c).removeClass("animated "+b.settings.animationIn).addClass("noAnimation").removeClass("noAnimation").addClass("animated "+b.settings.animationOut).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a(this).removeClass("animated "+b.settings.animationOut),j(b)})}function j(b){iztipso_bubble=b.tooltip(),iztipso_bubble.remove(),a.isFunction(b.settings.onHide)&&"show"==b.mode&&b.settings.onHide(iztipso_bubble),b.mode="hide",r===b?r=null:r&&console.log("WARNING: showing tooltip "+r.uid+" is not the currently hiding one ("+b.uid+")")}function k(a){r&&(r.hide(),j(r)),r=a}function l(){var a=window.navigator.msMaxTouchPoints,b="ontouchstart"in document.createElement("div");return a||b?!0:!1}function m(b){var c=b.clone();c.css("visibility","hidden"),a("body").append(c);var d=c.outerHeight(),e=c.outerWidth();return c.remove(),{width:e,height:d}}function n(b){var c,d,e,f=b.tooltip(),g=b.element,h=b,i=a(window),j=10;switch(g.parent().outerWidth()>i.outerWidth()&&(i=g.parent()),h.settings.position){case"top":d=g.offset().left+g.outerWidth()/2-m(f).width/2,c=g.offset().top-m(f).height-j,f.find(".iztipso_arrow").css({marginLeft:-8,marginTop:""}),c<i.scrollTop()?(c=g.offset().top+g.outerHeight()+j,f.find(".iztipso_arrow").css({"border-bottom-color":h.settings.background,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),f.removeClass("top bottom left right"),f.addClass("bottom")):(f.find(".iztipso_arrow").css({"border-top-color":h.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),f.removeClass("top bottom left right"),f.addClass("top"));break;case"bottom":d=g.offset().left+g.outerWidth()/2-m(f).width/2,c=g.offset().top+g.outerHeight()+j,f.find(".iztipso_arrow").css({marginLeft:-8,marginTop:""}),c+m(f).height>i.scrollTop()+i.outerHeight()?(c=g.offset().top-m(f).height-j,f.find(".iztipso_arrow").css({"border-top-color":h.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),f.removeClass("top bottom left right"),f.addClass("top")):(f.find(".iztipso_arrow").css({"border-bottom-color":h.settings.background,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),f.removeClass("top bottom left right"),f.addClass(h.settings.position));break;case"left":d=g.offset().left-m(f).width-j,c=g.offset().top+g.outerHeight()/2-m(f).height/2,f.find(".iztipso_arrow").css({marginTop:-8,marginLeft:""}),d<i.scrollLeft()?(d=g.offset().left+g.outerWidth()+j,f.find(".iztipso_arrow").css({"border-right-color":h.settings.background,"border-left-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),f.removeClass("top bottom left right"),f.addClass("right")):(f.find(".iztipso_arrow").css({"border-left-color":h.settings.background,"border-right-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),f.removeClass("top bottom left right"),f.addClass(h.settings.position));break;case"right":d=g.offset().left+g.outerWidth()+j,c=g.offset().top+g.outerHeight()/2-m(f).height/2,f.find(".iztipso_arrow").css({marginTop:-8,marginLeft:""}),d+j+h.settings.width>i.scrollLeft()+i.outerWidth()?(d=g.offset().left-m(f).width-j,f.find(".iztipso_arrow").css({"border-left-color":h.settings.background,"border-right-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),f.removeClass("top bottom left right"),f.addClass("left")):(f.find(".iztipso_arrow").css({"border-right-color":h.settings.background,"border-left-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),f.removeClass("top bottom left right"),f.addClass(h.settings.position))}d<i.scrollLeft()&&("bottom"==h.settings.position||"top"==h.settings.position)&&(f.find(".iztipso_arrow").css({marginLeft:d-8}),d=0),d+h.settings.width>i.outerWidth()&&("bottom"==h.settings.position||"top"==h.settings.position)&&(e=i.outerWidth()-(d+h.settings.width),f.find(".iztipso_arrow").css({marginLeft:-e-8,marginTop:""}),d+=e),d<i.scrollLeft()&&("left"==h.settings.position||"right"==h.settings.position)&&(d=g.offset().left+g.outerWidth()/2-m(f).width/2,f.find(".iztipso_arrow").css({marginLeft:-8,marginTop:""}),c=g.offset().top-m(f).height-j,c<i.scrollTop()?(c=g.offset().top+g.outerHeight()+j,f.find(".iztipso_arrow").css({"border-bottom-color":h.settings.background,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),f.removeClass("top bottom left right"),f.addClass("bottom")):(f.find(".iztipso_arrow").css({"border-top-color":h.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),f.removeClass("top bottom left right"),f.addClass("top")),d+h.settings.width>i.outerWidth()&&(e=i.outerWidth()-(d+h.settings.width),f.find(".iztipso_arrow").css({marginLeft:-e-8,marginTop:""}),d+=e),d<i.scrollLeft()&&(f.find(".iztipso_arrow").css({marginLeft:d-8}),d=0)),d+h.settings.width>i.outerWidth()&&("left"==h.settings.position||"right"==h.settings.position)&&(d=g.offset().left+g.outerWidth()/2-m(f).width/2,f.find(".iztipso_arrow").css({marginLeft:-8,marginTop:""}),c=g.offset().top-m(f).height-j,c<i.scrollTop()?(c=g.offset().top+g.outerHeight()+j,f.find(".iztipso_arrow").css({"border-bottom-color":h.settings.background,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),f.removeClass("top bottom left right"),f.addClass("bottom")):(f.find(".iztipso_arrow").css({"border-top-color":h.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),f.removeClass("top bottom left right"),f.addClass("top")),d+h.settings.width>i.outerWidth()&&(e=i.outerWidth()-(d+h.settings.width),f.find(".iztipso_arrow").css({marginLeft:-e-8,marginTop:""}),d+=e),d<i.scrollLeft()&&(f.find(".iztipso_arrow").css({marginLeft:d-8}),d=0)),f.css({left:d+h.settings.offsetX,top:c+h.settings.offsetY})}var o="iztipso",p={speed:400,background:"#55b555",color:"#ffffff",position:"top",width:200,maxWidth:"",delay:200,animationIn:"",animationOut:"",toggleAnimation:!1,offsetX:0,offsetY:0,content:null,ajaxContentUrl:null,useTitle:!0,tooltipHover:!0,onBeforeShow:null,onShow:null,onHide:null};a.extend(b.prototype,{init:function(){var a=this,b=this.element,c=this.doc;b.addClass("iztipso_style").removeAttr("title"),l()?(b.on("click."+o,function(b){"hide"==a.mode?a.show():a.hide(),b.stopPropagation()}),c.on("click",function(){"show"==a.mode&&a.hide()})):(b.on("mouseover."+o,function(){a.show(a.settings.delay)}),b.on("mouseout."+o,function(){a.hide(a.settings.delay)}))},tooltip:function(){return this.iztipso_bubble||(this.iztipso_bubble=a('<div class="iztipso_bubble"><div class="iztipso_content"></div><div class="iztipso_arrow"></div></div>'),this.iztipso_bubble.find(".iztipso_content").html(this.content()),a(window).resize(function(){"show"==this.mode&&n(this)})),this.iztipso_bubble},show:function(){var b=(this.tooltip(),this);return"show"==b.mode?void a.doTimeout(String(b.uid)):(a.isFunction(b.settings.onBeforeShow)&&b.settings.onBeforeShow(a(this)),c(this),void a.doTimeout(String(b.uid),b.settings.delay,function(){f(b)}))},hide:function(){h(this)},destroy:function(){var a=this.element,b=this.win,c=this.doc;a.off("."+o),b.off("resize",null,"tipsoResizeHandler"),l()&&c.off("click",null,"closeTipso"),a.removeData(o),a.removeClass("iztipso_style").attr("title",this._title)},content:function(){var b,c=this.element,d=this,e=this._title;return b=d.settings.ajaxContentUrl?a.ajax({type:"GET",url:d.settings.ajaxContentUrl,async:!1}).responseText:d.settings.content?d.settings.content:d.settings.useTitle===!0?e:c.data("iztipso")},update:function(a,b){var c=this;return b?void(c.settings[a]=b):c.settings[a]}});var q=0,r=null,s=function(){var a=document.createElement("p").style,b=["ms","O","Moz","Webkit"];if(""==a.transition)return!0;for(;b.length;)if(b.pop()+"Transition"in a)return!0;return!1}();a[o]=a.fn[o]=function(c){var d=arguments;if(void 0===c||"object"==typeof c)return this instanceof a||a.extend(p,c),this.each(function(){a.data(this,"plugin_"+o)||a.data(this,"plugin_"+o,new b(this,c))});if("string"==typeof c&&"_"!==c[0]&&"init"!==c){var e;return this.each(function(){var f=a.data(this,"plugin_"+o);f||(f=a.data(this,"plugin_"+o,new b(this,c))),f instanceof b&&"function"==typeof f[c]&&(e=f[c].apply(f,Array.prototype.slice.call(d,1))),"destroy"===c&&a.data(this,"plugin_"+o,null)}),void 0!==e?e:this}}});